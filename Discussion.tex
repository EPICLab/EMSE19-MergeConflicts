%!TEX root = main.tex

\section{Discussion}\label{discussion}

\subsection{Awareness Phase}

\boldif{Developers do not regularly actively monitor for merge conflicts. ...}
The results presented in Section~\ref{RQ1a} show that only a third of developers actively monitor for merge conflicts.
When developers are caught unaware of the conflict, they are more likely to be interrupted by it.
This can lead to more frustration, as they do not have any warning of when the conflict will occur and whether they have the time to deal with it immediately.

\boldif{Therefore their approaches are mostly \emph{reactive,} and their tool selection reflects that.}
When we looked at the processes developers employ we found that most developers employ \emph{reactive} processes, even if they are proactively in monitoring for merge conflicts once they have occurred.
This can be seen as a problem of the tools that developers have at their disposal.
All the tools mentioned support only a \emph{reactive} approach, which biases developers towards one particular solution.
If developers want a more \emph{proactive} approach, then based on the tools they use, they need to come up with their own solution.
The most often cited techniques involve increasing communication among developers.
While this technique might be effective in large teams, it scales very poorly and cannot be effectively used in larger organizations~\cite{brooks1974mythical,steiner1972group}.

\boldif{All the above point towards a need for better collaborative tools, that promote a proactive approach}
Our results point to the conclusion that developers are not aware of existing proactive tools (e.g. Palant\'{i}r~\cite{sarma_palantir:_2003}, Crystal~\cite{Brun2011}), and are therefore not leveraging those tools to actively monitor for merge conflicts.
However, developers are trying to mitigate the severity of merge conflicts by attempting to resolve them as soon as they become aware.

\subsection{Planning Phase}

\boldif{25\% of developers consider all conflicts as being equally urgent.}
One quarter of all developers consider all merge conflicts to be equally urgent.
We can assume that most developers will interrupt their work regardless of the type of merge conflict.
Therefore, they will give the same level of attention, for example, to a conflict generated by whitespace or formatting changes, as a conflict that is generated by conflicting logical changes. 

\boldif{The research community needs to pay attention to developers needs when it comes to categorizing MC.}
Even if developers use a \emph{reactive} monitoring approach for detecting merge conflicts, better tool support can make their lives easier.
For example, instead of notify a developer that a merge conflict has occurred, adding an annotation within tools indicating the type of conflict might assist developers.
This type of contextualized information would allow developers to more precisely know how urgent the merge conflict is, without having to interrupt their workflow.

\boldif{60\% of developers defer a merge conflict, at least once. However, there doesn't seem to be a systematic understanding of the effect of such a deferral.}
Our study results indicate that 60\% of developers have deferred a merge conflict at least once. 
Developers have listed multiple reasons for deferral, however, two stand out: complexity and the number of conflicting locations.
Both of these reasons indicate that a developer is more likely to defer if the conflict resolution appears to be lengthy, either because the potential changes are non-trivial or because there are many smaller conflicts requiring the developers' attention.

\boldif{The results of such a deferral can be disastrous. However, it is difficult to make an assessment of the effect of the deferral when the decision to defer is being made.} 
The results of deferring can be disastrous. 
Participants reported having to throw away code (the \emph{Nuclear Option}) and even rising to the level of
customers and users experiencing broken functionality and loss of access.
However, it is difficult to assess a deferral to determine if it will turn a single merge conflict into a larger problem.
Tools could provide such information; responding to developers with enough information to make accurate and informed decisions in order to prevent further issues down the line.

\boldif{Some developers do not have an approach for dealing with merge conflicts.}
Finally, an interesting result is that some developers do not have a strategy for approaching a merge conflict resolution.
The existence of this \textit{no strategy} approach is anecdotal, but curious, since we assume that developers are rational actors seeking to organize themselves in ways that increase the likelihood of successful outcomes.
And yet this strategy appears to go counter to that notion.
One explanation for the lack of a strategy is the lack of experience.
With a mean of 3.5 years of programming experience (5.6 years less than the overall mean), these respondents might not have encountered enough situations to form a coherent strategy.

\subsection{Resolution Phase}

\boldif{Developers don't use metrics, they use basic measurements (such as educated guesses)}
Developers rarely use metrics to guide their merge conflict resolutions.
Instead, the developers use educated guesses and intuition based on familiarity with the codebase; either from writing the code, or having worked with it.

Developers reported that expertise in the area of conflicting code is one of the top factors in determining the difficulty of a merge conflict.
Additionally, developers also indicate that increases in perceived complexity of merge conflicts is strongly linked with the degree of difficulty in resolving it.
Therefore, developers' perceptions and intuition are relied on throughout the implementation of their resolution.

Interestingly, when developers perceive a merge conflict to be too difficult to resolve they occasionally resort to removing all conflicting code and reimplementing the underlying functionality in order to fix it.
19\% of developers described \textit{redoing changes} as part of their backup strategy.
This \textit{Nuclear Option} is clearly a time-consuming strategy for developers (both in planning and implementing a resolution), and yet the perceived costs of trying to unravel the conflicting code appear to be higher than the costs of reimplementing features.

\subsection{Evaluation Phase}

\boldif{Tests are still the most common criteria for determining a merge conflict resolution successful.}
The two most common evaluation criteria that developers mentioned are that the \emph{code compiles,} and that \emph{all tests pass.}
However, less then half selected both options.
While tests passing can be considered a good criteria of a successful resolution, the fact that the code compiles is not.
Even if the code compiles, there can be logical errors that are introduced during the merge resolution process, especially if the resolution was difficult.

\boldif{Only a minority of developers mention that code review is part of their success criteria}
Interestingly, only a minority of developers (37.25\%) mentioned code review as part of their success criteria.
%TODO add citation for the code review part
While code reviews are an effective way to detect bugs introduced by changes in the codebase, the practice appears to have not been adopted for code changed during merge conflict resolutions.

\boldif{Some developers have only a myopic view of a correct resolution, relying on eyeballing it and basic compilation}
Many developers replied that they use an informal approach for validating the results of a merge conflict resolution.
A majority (64.7\%) of the respondents mentioned that one of their criteria is that the merge result \emph{``looks correct.''}
Experience can play a big factor, as this method is highly subjective.

%TODO: I just threw this in here. I think the ideas is interesting -Caius
\boldif{Conflict might be difficult, because the result is hard to evaluate}
The fact that developers mention code complexity as one of the main factors in deferring a merge conflict resolution, and that developers ``eyeball'' the resolutions, seems to be an indication that evaluation might be a problem in the resolution.
Merge conflicts are perceived as difficult because \emph{the evaluation of the results are difficult.}
If this is the case, tools should provide better support for developers when they evaluate their resolution.
We leave it to future work to further explore this possibility. 

\boldif{Some approaches will only detect direct merge conflicts, not indirect ones.}

\boldif{There is a lack of tool support that makes it difficult for developers to properly evaluate the success of a merge conflict resolution.}

\boldif{Failed merge conflict resolution are a somewhat common occurrence. Backup strategies vary.}
Finally, a large majority of our respondents indicated that they have had failed merge conflict resolutions.
The most common backup strategies, are in a way, opposite of the primary strategies.
They either take the merge conflicts ``offline,'' and work on them without impacting others in the team, or they will choose to bring another pair of eyes to the table, and collaborate with someone in order to resolve the conflict.

\boldif{Some strategies reveal that developers find it easier to reimplement, than to figure out what went wrong.}
The two most intriguing strategies are developers \emph{trying again,} and \emph{redoing the changes.}
\emph{Trying again} implies that developers think that they might have missed something, and that by going through the changes again, they might catch or have a better understanding of the two changes that are conflicting.
On the other hand, the fact that 14 developers mention that they \emph{redo the changes} shows that the \emph{Nuclear Option} is more used than we initially observed.
This option is very expensive, as developers have to redo their changes, from scratch on top of what can possibly be new code.
Tools should provide better merging support, so developers can resolve a conflict and not have to scrap good code just because it happens to intersect with other changes.

