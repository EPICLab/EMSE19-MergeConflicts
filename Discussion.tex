%!TEX root = main.tex

\section{Discussion}\label{discussion}

\subsection{Awareness Phase}

\boldif{Developers do not regularly actively monitor for merge conflicts. ...}
The results presented in Section~\ref{RQ1a} show that only a third of developers actively monitor for merge conflicts.
When developers are caught unaware of the conflict, they are more likely to be interrupted by it.
This can lead to more frustrations, the they do not have any warning of when the conflict will occur.

\boldif{Therefore their approaches are mostly \emph{reactive,} and their tool selection reflects that.}
When we looked at the processes developers employ we found that most developers employ \emph{reactive} processes, even if they \emph{proactively} monitor for a merge conflict.
This can be seen as a problem of the tools that developers have at their disposal.
All the tools mentioned support only a \emph{reactive approach,} which biases developers towards one particular solution.
If developers want a more proactive approach, they need to come up with their own solution.
The most options is to increase communication.
While this technique might be effective in large teams, it scales very poorly, and cannot be effectively used in larger organizations. 

\boldif{All the above point towards a need for better collaborative tools, that promote a proactive approach}
Our results point to the conclusion that developers are not aware of existing proactive tools (e.g. Palant\'{i}r~\cite{sarma_palantir:_2003}, Crystal~\cite{Brun2011}).
Furthermore they are note leveraging the advantages these tool bring to the table. %TODO Add at least one advantage here.

\subsection{Planning Phase}

\boldif{25\% of developers consider all conflicts as being equally urgent.}
One quarter of all developers consider all merge conflicts to be equally urgent.
We can assume that most developers will interrupt their work regardless of the type of merge conflict.
Therefore, they will give the same level of attention, for example, to a conflict generated by whitespace, or formatting changes, as a conflict that is generating by conflicting logical changes. 

\boldif{The research community needs to pay attention to developers needs when it comes to categorizing MC.}
Even if the developers use a \emph{reactive} monitoring approach to detecting merge conflicts, better tool support can make their lives easier.
For example, instead of notify a developer that a merge conflict has occurred, adding an annotation as to the type of conflict might help developers.
This will give them enough information to know how urgent the merge conflict really is, without having to interrupt their workflow.

\boldif{60\% of developers defer a merge conflict, at least once. However, there doesn't seem to be a systematic understanding of the effect of such a deferral.}
The responses indicate that 60\% of developers have deferred a merge conflict at least once. 
Developers have listed multiple reasons for deferral, however two stand out: complexity and the number of conflicting regions.
Both these indicate that a developer will defer if the conflict resolution looks lengthy, either because the changes are not trivial, or simply because there are a lot of smaller conflict to solve.

\boldif{The results of such a deferral can be disastrous. However, it is difficult to make an assessment of the effect of the deferral when the decision to defer is being made.} 
The results of deferring can be disastrous. 
Participants reported having to throw away code (the \emph{Nuclear Option}) and even having customer or users noticing broken functionality.
However, it is difficult to make an assessment of when a deferral can turn a merge conflict into an even bigger problems.
Tools could provide such information, in order to help developers make accurate and informed decisions to prevent issues further down the line.

\boldif{Some developers do not have an approach for dealing with merge conflicts.}
Finally, an interesting result is that some developers do not have a strategy for approaching a merge conflict resolution.
The existence of this \textit{no strategy} approach is anecdotal, but curious, since we assume that developers are rational actors seeking to organize themselves in ways that increase the likelihood of successful outcomes.
And yet this strategy appears to go counter to that notion.
On of the explanations for the lack of a strategy is the lack of experience, as they did not encounter enough situations to form a strategy.

\subsection{Resolution Phase}

\boldif{Developers don't use metrics, they use basic measurements (such as educated guesses)}
Developers rarely use metrics to guide their merge conflict resolutions.
Instead, the developers use educated guesses and intuition based on familiarity with the codebase; either from writing the code, or having worked with it.

Developers reported that expertise in the area of conflicting code is one of the top factors in determining the difficulty of a merge conflict.
Additionally, developers also indicate that increases in perceived complexity of merge conflicts is strongly linked with the degree of difficulty in resolving it.
Therefore, developers' perceptions and intuition are relied on throughout the implementation of their resolution.

Interestingly, when developers perceive a merge conflict to be too difficult to resolve they occasionally resort to removing all conflicting code and reimplementing the underlying functionality in order to fix it.
19\% of developers described \textit{redoing changes} as part of their backup strategy.
This \textit{Nuclear Option} is clearly a time-consuming strategy for developers, and yet the perceived costs of trying to unravel the conflicting code appear to be higher than the costs of reimplementing features.

\subsection{Evaluation Phase}

\boldif{Tests are still the most common criteria for determining a merge conflict resolution successful.}
The 2 most common criteria that developers mentioned is that the \emph{code compiles,} and that \emph{all tests pass.}
However, less then half selected both options.
While tests passing can be considered a good criteria, the fact that the code compiles is not.
Even if the code compiler, there might be logical errors that are introduced during the merge resolution process, especially if the merge conflict resolution was a difficult one.

\boldif{Only a minority of developers mention that code review is part of their success criteria}
Interestingly, only a minority of developers mentioned code review as part of their success criteria (37.25\%).
%TODO add citation for the code review part
While code reviews are an effective way to detect bugs introduced in the code base, the practice does not seem to be applied to code changed during merge conflict resolution.

\boldif{Some developers have only a myopic view of a correct resolution, relying on eyeballing it and basic compilation}
Many developers replied that they use an informal approach for validating the results of a merge conflict resolution.
A majority (64.7\%) of the respondents mentioned that one of their criteria is that the merge result \emph{``looks good.''}
Experience can play a big factor, as this method is highly subjective.

%TODO: I just threw this in here. I think the ideas is interesting -Caius
\boldif{Conflict might be difficult, because the result is hard to evaluate}
The fact that developers mention code complexity as one of the main factors in deferring a merge conflict resolution, and that developers ``eyeball'' the resolutions, seems to be an indication that evaluation might be a problem in the resolution.
Merge conflicts are perceived as difficult because \emph{the evaluation of the result as difficult.}
If this is the case, tools should provide better support for developers when they evaluate their resolution.
We leave it to future work to further explore this possibility. 

\boldif{Some approaches will only detect direct merge conflicts, not indirect ones.}

\boldif{There is a lack of tool support that makes it difficult for developers to properly evaluate the success of a merge conflict resolution.}

\boldif{Failed merge conflict resolution are a somewhat common occurrence. Backup strategies vary.}
Finally, almost large majority of our respondents have mentioned that they have had failed merge conflict resolutions.
The most common backup strategies, are in a way, opposite.
They either take the merge conflicts ``offline,'' and work on them without impacting others in the team, or they will choose to bring another pair of eyes to the table, and collaborate with someone in order to resolve the conflict.

\boldif{Some strategies reveal that developers find it easier to reimplement, than to figure out what went wrong.}
The two most intriguing strategies are developers \emph{trying again,} and \emph{redoing the changes.}
\emph{Trying again} implies that developers think that they might have missed something, and that by going through the changes again, they might catch or have a better understanding of the two changes that are conflicting.
On the other hand, the fact that 14 developers mention that they \emph{redo the changes} shows that the \emph{Nuclear Option} is more used than we initially observed.
This option is very expensive, as developers have to redo their changes, from scratch on top of what can possibly be new code.
Tools should provide better merging support, so developers can resolve a conflict and not have to scrap good code just because it happens to intersect with other changes.

